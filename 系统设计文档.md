# 系统设计文档





## 用户管理

### MySQL

- id-密码

### Spring Security

- 用户鉴权



## 电影

### MySQL表

- 评论表【用户-电影】 √
  - **评论内容**
    - **【分词统计】->【tag】**
  - 评分



- 收藏【用户-电影】*n [导演、演员……]
  - 更新用户画像



- 【前置：推荐】不感兴趣【用户-电影】
  - 更新用户画像



### 功能

- 用户评论电影
- 用户收藏电影、导演……
- 用户对电影不感兴趣
- 统计
  - 收藏统计
  - **评分更新**
  - **排行榜**
    - 不确定 后期迭代

### 用户画像

MySQL数据->Neo4j 构建用户相关的画像图谱

**图谱标签**：

- 【用户】-( 评分 (高评分 低评分)， 收藏， 不感兴趣 )->
  - 【电影】
  - 【导演】
  - 【演员】
  - 【制片方】？
- 统计相关**电影**的标签【百分比】
  - 数据集电影类型
  - 标签提取？？

**用户标签：对图谱的总结**

- **用户**自己设置的标签【和电影标签构建相似度 word embedding】
  - 用户资料设置
  - 用户标签权重分配
  - 怎么给用户 提供标签的选择
    - 输入
      - 统一标签
      - 联想已有的标签
    - 选择

偏好权重要累**加**



推荐：

- 用户画像标签--相关电影
- 相似用户--可能喜欢的电影---协同过滤



### 标签相关电影

remind：用户标签、电影标签是规定范围内的【范围待办】

**【检查电影数据，筛选可能的标签】**



### 用户协同过滤

特征：标签

- 实际上是图谱（用户画像）相似度
- 标签是图谱的统计总结 => 标签的相似度代替

**离线完成，准备好相似用户**



### 电影协同过滤

可以提前把相似电影算好，存在NoSQL之类的里面

【待定，回去调研】

**redis，**

**mongodb，**



## 搜索

### MySQL

- 电影相关的事实表

### Elastic Search

- 搜索相关的字段导入到elastic search

### 搜索功能

- 过滤器
  - 取决于字段 电影类型
- 关键字搜索【根据电影名、导演等查找】
  - elastic search搜索字段
  - 返回id
  - 取得电影全部信息
    - 电影
    - 电影评价
    - 

## 推荐



#### 召回

- 高评分
  - 50
- 高热度
  - 50
- 用户画像 标签相关类型
  - 画像图谱深度2+
  - 100
- 用户协同过滤
  - 相似用户
    - 5
  - 相似用户的图谱
    - 5*100
- 电影协同过滤
  - 收藏的电影
    - 100
  - 相似度top
    - 1000

#### 过滤

- 标记过不喜欢的
- 协同过滤的结果要去重【保留列表作为排序依据】

#### 排序

- 按评分排序
- 按热度排序
- 重复度排序
- 每一路取top10

#### 融合排序

- 每一路召回的权重*评分





## 迭代一

1. 数据处理【chy】
   1. MySQL
   2. Elastic Search
2. 用户注册登录【hcd】
   1. 加密
3. 用户行为【fbj】
   1. 评论
   2. 收藏
   3. 不喜欢
4. 界面设计【wtc】
   1. 用户
      1. 个性设置
      2. 登录注册
   2. 电影详细介绍界面
   3. 主页
      1. 推荐
      2. 搜索



## MySQL数据表



user

| 字段名  | 属性        | 描述                       |
| ------- | ----------- | -------------------------- |
| usrId   | int         | primary key, auto increase |
| usrName | varchar(12) |                            |



| 字段名  | 属性        | 描述                       |
| ------- | ----------- | -------------------------- |
| movieId | int         | primary key, auto increase |
| usrName | varchar(12) |                            |

